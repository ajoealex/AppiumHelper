services:
  api:
    build:
      context: ..
      dockerfile: docker_setup/api.Dockerfile
    environment:
      NO_GLOBAL_CONF: "1"
      API_HOST: ${API_HOST:-0.0.0.0}
      API_PORT: ${API_PORT:-3001}
    ports:
      - "${API_PORT:-3001}:${API_PORT:-3001}"
    volumes:
      - ../app_data:/app/app_data
    networks:
      - appium_helper_net

  web:
    build:
      context: ..
      dockerfile: docker_setup/web.Dockerfile
    depends_on:
      - api
    environment:
      NO_GLOBAL_CONF: "1"
      WEB_HOST: ${WEB_HOST:-0.0.0.0}
      WEB_PORT: ${WEB_PORT:-5173}
      VITE_API_PROTOCOL: ${VITE_API_PROTOCOL:-http}
      VITE_API_HOST: ${VITE_API_HOST:-localhost}
      VITE_API_PORT: ${API_PORT:-3001}
    ports:
      - "${WEB_PORT:-5173}:${WEB_PORT:-5173}"
    networks:
      - appium_helper_net

networks:
  appium_helper_net:
    name: appium_helper_net
    driver: bridge
